# 📆 2024-11-13

# 🔔 스크럼

- 학습 목표 1 : 전역 상태 관리

<br/>

# 🚀 Today I Learned

```
React에서 상태 관리 라이브러리를 사용하게 된 이유와 그 주요 장단점을 설명하세요. 더불어 전역 상태 관리가 React 애플리케이션 구조에서 왜 중요한지 설명하세요.
```
오늘은 위의 주제에 대해서 딥 다이브를 진행했다.

## 상태(state)

리액트 공식 문서에서 state는 "컴포넌트의 **동적인 데이터를 관리**하기 위해 사용되는 React 객체"라고 소개한다.

state는 특정 시점에서 컴포넌트가 유지하는 데이터이고, state가 변경될 때 컴포넌트는 이를 반영하기 위해 리렌더링된다.

함수형 컴포넌트에서는 **useState Hook을 사용해서 state를 관리**할 수 있다.

### 상태의 종류

state는 크게 **전역 상태, 컴포넌트 간 상태, 지역 상태**로 나눌 수 있다.

**[전역 상태(Global State)]**

전역 상태는 **애플리케이션의 모든 컴포넌트에서 공유되는 state**를 말한다. 대표적으로 로그인 상태, 사용자 정보 등이 해당된다.

Prop Drilling 방식을 활용해서 부모 컴포넌트에서 자식 컴포넌트로 데이터(props)를 전달한다.

**[컴포넌트 간 상태(Cross Component State)]**

컴포넌트 간 상태는 **여러 컴포넌트에서 관리되는 state**를 말한다. 대표적으로 모달이 해당된다.

Prop Drilling 방식을 활용해서 부모 컴포넌트에서 자식 컴포넌트로 데이터(props)를 전달한다.

**[지역 상태(Local State)]**

지역 상태는 **다른 컴포넌트와 공유되지 않고 특정 컴포넌트 내에서만 사용되는 state**를 말한다. 대표적으로 사용자의 입력값 등이 해당된다.


### Prop Drilling

![alt text](https://blog.joshsoftware.com/wp-content/uploads/2024/05/prop-drilling-vs.-react-context.jpg)

Prop Drilling은 **부모 컴포넌트가 자식 컴포넌트에게 데이터를 전달하는 방식**을 말한다.

리액트에서 **컴포넌트 간 데이터 전달은 props를 통해서 이루어지는데**, 부모 컴포넌트에서 깊은 위치에 있는 자식 컴포넌트로 데이터를 전달하려면 여러 단계의 중간 컴포넌트를 거쳐야 한다.

이때 중간 컴포넌트들이 불필요하게 데이터를 props로 전달해야 하기 때문에 다음과 같은 문제가 발생할 수 있다.

- 코드 중복이 발생하고 코드가 복잡해져 유지보수가 어려워진다.
- 여러 단계를 거쳐 전달된 props가 많아지면, 각 컴포넌트가 어떤 데이터를 받는지 파악하기 어려워진다.


### [번외] 왜 지역 변수 대신 state를 사용해야 할까?

컴포넌트가 데이터를 관리하기 위해 state를 사용하는 것이라면, 지역 변수를 사용해도 되지 않을까? 라는 의문이 들었고 왜 굳이 state를 사용하는지에 대해서 조사를 해보았다. 

리액트에서 state를 사용하는 이유는 다음과 같다.

**1. 자동 렌더링**

리액트 컴포넌트는 state가 변경되면 **자동으로 리렌더링** 되도록 하지만, 지역 변수는 변경되었을 때 자동으로 리렌더링 되지 않는다.

**2. 컴포넌트 상태 보존**

state는 컴포넌트가 리렌더링 되어도 **값이 보존**되지만, 지역 변수는 컴포넌트가 리렌더링되면 값이 초기화된다.

**3. 리액트의 최적화**

리액트는 state를 추적하면서 변경된 부분만 다시 렌더링하는 방식으로 **최적화**를 한다. 지역 변수를 사용하면 최적화 기능을 사용할 수 없다.

```jsx
import React, { useState } from 'react';

const App = () => {
    const LocalCounter = () => {
        let count = 0;

        const handleClick = () => {
            count += 1;
            console.log(count);
        }

        return (
            <div>
                <h1>Local Counter</h1>
                <p>현재 값: {count}</p> // 콘솔에 값은 찍히지만, 화면에 렌더링되지 않음
                <button onClick={handleClick}> + </button>
            </div>
        )
    }

    const StateCounter = () => {
        const [count, setCount] = useState(0);

        const handleClick = () => {
            setCount(count + 1);
            console.log(count);
        }

        return (
            <div>
                <h1>State Counter</h1>
                <p>현재 값: {count}</p> // count가 변경되면 자동으로 리렌더링됨
                <button onClick={handleClick}> + </button>
            </div>
        )
    }

    return (<div>
        <LocalCounter />
        <br/>
        <StateCounter />
    </div>)
};

export default App;
```

## 상태 관리

어플리케이션이 커지고 복잡해질수록 state는 점점 많아지고 서로 의존하게 되어 관리가 어려워지게 된다.

인스타그램을 예로 들면, 정말 많은 state(e.g. 인스타 아이디, 팔로워 수, 팔로잉 수)들이 관리되고 있음을 알 수 있다. 

이러한 state들은 **일관성을 유지해야** 한다. 이는 서로 다른 컴포넌트에서 동일한 state를 다룬다면 그 **출처가 같아야 한다는 것**이다.

인스타 피드에 업로드한 게시글들을 렌더링하는 컴포넌트와 그 게시글들의 개수를 렌더링하는 컴포넌트가 있다고 할 때 두 가지 컴포넌트 모두 "내가 올린 게시글"에 대한 데이터를 가져와 사용할 것이다.

이때 피드에 보여지는 게시글은 11개인데, 게시글들의 개수를 렌더링하는 컴포넌트는 10개라면 사용자는 혼란을 느끼게 될 것이다.

이는 두 컴포넌트가 각각 독립적으로 state를 관리하면서 **서로 다른 데이터를 참조**하기 때문에 발생한다. 


### 리액트에서 상태 관리 라이브러리를 사용하게 된 이유

서로 다른 두 컴포넌트에 같은 데이터가 필요하다고 할 때 각 컴포넌트가 부모자식 관계로 되어있지 않은 이상 각 컴포넌트 간의 **직접적인 데이터 전달은 어렵다**. 

데이터를 전달하기 위해 부모 컴포넌트로 데이터를 보내고 다시 그 데이터를 필요한 컴포넌트로 전달해야 한다. 하지만 이렇게 Prop Drilling이 많아지면 코드가 복잡해지고 유지보수가 어려워지는 문제가 생긴다.

따라서, Prop Drilling 문제를 해결하기 위해 상태 관리 라이브러리를 사용하여 **여러 컴포넌트에서 공유해야 하는 상태를 관리할 수 있다**.

리액트에서 사용되는 대표적인 상태 관리 라이브러리는 다음과 같다. 
- Context API
- Redux
- Recoil


## 전역 상태 관리의 중요성

전역 상태 관리는 애플리케이션에서 여러 컴포넌트가 공통으로 사용해야 하는 데이터나 상태를 **중앙에서 일관성 있게 관리하는 방법**이다.

**1. 컴포넌트 간 데이터 공유**

여러 컴포넌트가 동일한 데이터(e.g. 사용자 인증 정보)를 필요로 할 수 있는데, 이를 전역 상태로 관리하면 PProp Drilling을 통해 데이터를 전달할 필요가 없어진다.

**2. 상태 일관성 유지**

전역 상태를 통해 상태의 출처를 일관되게 유지할 수 있기 때문에 여러 컴포넌트에서 동일한 상태를 사용할 때 혼란을 방지할 수 있다.

예를 들어, 특정 컴포넌트에서 상태를 변경했을 때 다른 컴포넌트들에도 해당 상태가 반영되도록 할 수 있다.

**3. 성능 최적화**

상태를 중앙에서 관리하여, 해당 상태를 필요로 하는 컴포넌트들은 구독을 통해 상태의 변경이 있을 때마다 구독하고 있는 컴포넌트만 리렌더링하게 할 수 있다.

## 요약

React에서 상태 관리 라이브러리를 사용하면 애플리케이션이 커지고 복잡해질수록 발생하는 Prop Drilling 문제를 해결하고, 전역 상태를 효율적으로 관리해 일관성 있는 데이터 처리가 가능해진다.

## Reference

https://velog.io/@rookieand/React%EC%9D%98-state-%EA%B7%B8%EB%A6%AC%EA%B3%A0-useState%EC%97%90-%EB%8C%80%ED%95%B4-%EB%8D%94-%EC%95%8C%EA%B3%A0-%EC%8B%B6%EC%96%B4%EC%A1%8C%EB%8B%A4

https://mingule.tistory.com/74

https://bandal.dev/React/state-management

<br/>

# 🔥 오늘의 도전 과제와 해결 방법

- 리액트 전역 상태 관리에 대해 학습했다 !

<br/>

# 🗨️ 오늘의 회고

- 리액트 공부 시작 ~~


<!--
- 오늘의 학습 경험에 대한 자유로운 생각이나 느낀 점을 기록합니다.
- 성공적인 점, 개선해야 할 점, 새롭게 시도하고 싶은 방법 등을 포함할 수 있습니다.-->

