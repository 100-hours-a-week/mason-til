# 📆 2024-12-13

# 🔔 스크럼

- 학습 목표 1 :  페이지 폴트 
<br/>

# 🚀 Today I Learned

## 페이지 폴트

프로세스에게 큰 주소 공간을 제공함으로써, 프로그램의 자료구조를 위한 충분한 메모리 공간이 있는지 걱정하지 않아도 된다. 즉, **사용 편의성**을 얻을 수 있다.

이에 더해, 동시에 여러 프로그램을 실행시켜 CPU 사용률을 높이는 **멀티 프로그래밍**이 등장하면서 많은 프로세스들의 페이지를 물리 메모리에 올려야 했다.

멀티 프로그래밍과 사용 편의성과 같은 이유로 **물리 메모리의 크기를 초과하는 메모리를 필요로**하게 되어 운영체제는 당장 필요하지 않은 페이지를 **메모리가 아닌 디스크에 보관**해두는 방식을 사용하게 된다.


### 스왑 공간

스왑 공간은 **디스크에 페이지를 저장할 수 있게 확보된 공간**이다. 이때 스왑 공간의 입출력 단위는 페이지이고 두 가지 작업이 수행될 수 있다.
 
- 스왑 아웃(swap out): 메모리의 페이지를 읽어 디스크에 쓴다.
- 스왑 인(swap in): 디스크의 페이지를 읽어 메모리에 쓴다.

### Present Bit

![노트 2024  12  7](https://github.com/user-attachments/assets/9567a4fa-2de9-4d41-b900-0981c1505733)

페이지가 디스크로 스왑되는 것을 가능하게 하려면, 페이지 테이블 항목(PTE)에서 해당 페이지가 **물리 메모리에 존재하지 않는다는 것을 표현**할 수 있어야 한다.

이때 **present bit**가 사용되는데, 1로 설정되어 있다면 물리 메모리에 해당 페이지가 존재한다는 것을 의미하고 0으로 설정되어 있다면 물리 메모리에 해당 페이지가 존재하지 않고 디스크에 존재한다는 것을 의미한다.

물리 메모리에 존재하지 않는 페이지를 접근하는 것을 **페이지 폴트(page fault)**라고 하고, **PTE의 present bit가 0**으로 설정되어 있는 경우를 의미한다.


### 페이지 폴트의 처리

페이지 폴트가 발생하면, 이를 처리하기 위해 운영체제로 제어권이 넘어가고 **페이지 폴트 핸들러가 실행**된다.

가장 먼저, 운영체제는 **페이지 테이블 항목(PTE)에서 해당 페이지의 디스크 상 위치를 파악**하여 메모리로 탑재한다. (디스크 I/O 발생)

디스크 I/O가 완료되면, 해당 페이지 테이블 항목(PTE)의 페이지 프레임 번호(PFN) 값을 **탑재된 페이지의 메모리 위치로 갱신**한다.

이 작업이 완료되면, 페이지 폴트를 발생시킨 **명령어가 재실행**된다. (재실행 1회)

명령어 재실행으로 인해 TLB 미스가 발생될 수 있고, TLB 미스 처리 과정에서 TLB 값이 갱신된다.

이 작업이 완료되면, TLB 미스를 발생시킨 **명령어가 재실행**된다. (재실행 2회)

# 🔥 오늘의 도전 과제와 해결 방법

- 페이지 폴트

<br/>

# 🗨️ 오늘의 회고
- 멀티 레벨 페이징에 대해서 학습 완료

<!--
- 오늘의 학습 경험에 대한 자유로운 생각이나 느낀 점을 기록합니다.
- 성공적인 점, 개선해야 할 점, 새롭게 시도하고 싶은 방법 등을 포함할 수 있습니다.-->
